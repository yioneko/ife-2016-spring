import"./dynamic-import-polyfill.301f8c0f.js";function e(e){var t=e.getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;var a=e.getDate();return t+"-"+n+"-"+(a=a<10?"0"+a:a)}function t(t){for(var n={},a=new Date("2016-01-01"),r=1;r<92;r++)n[e(a)]=Math.ceil(Math.random()*t),a.setDate(a.getDate()+1);return n}var n={"北京":t(500),"上海":t(300),"广州":t(200),"深圳":t(100),"成都":t(300),"西安":t(500),"福州":t(100),"厦门":t(100),"沈阳":t(500)};function a(){const e=n[document.querySelector("#city-select").selectedOptions[0].textContent],t=document.querySelector("#form-gra-time input:checked").value,a={view:t,data:{}};switch(t){case"day":a.data=JSON.parse(JSON.stringify(e));break;case"month":{let t,n,r=0,c=0,o=!0;for(const i in e){n=i.match(/(\d+-\d+)-\d+/)[1];let d=e[i];o||t===n?(o=!1,r+=d,c++):(a.data[t]=r/c,r=d,c=1),t=n}a.data[t]=r/c;break}case"week":{let t=0,n=1,r=0;for(const c in e)t+=e[c],r++,7==r&&(r=0,a.data[`Week-${n}`]=t/7,n++,t=0);r>0&&(a.data[`Week-${n}`]=t/r);break}}return a}function r(e,t,n,a){const r=document.createElement("div"),c=document.createElement("div"),o=document.createElement("span");return t<document.createElement("canvas").getContext("2d").measureText(e).width&&(o.style.writingMode="vertical-lr"),o.style.fontSize="12px",o.textContent=e,c.style.width=t+"px",c.style.height=n/500*a+"px",c.style.backgroundColor=`rgb(${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())})`,c.title=`${e}: ${n}`,r.appendChild(c),r.appendChild(o),r}const c=document.querySelector(".aqi-chart-wrap");function o(e){let t;switch(e.view){case"day":t=10;break;case"week":t=70;break;case"month":t=300}for(const n in e.data)c.appendChild(r(n,t,e.data[n],200))}let i={nowSelectCity:-1,nowGraTime:"day"};function d(){if(document.querySelector("#city-select").selectedIndex!==i.nowSelectCity||document.querySelector("#form-gra-time input:checked").value!==i.nowGraTime){for(i.nowSelectCity=document.querySelector("#city-select").selectedIndex,i.nowGraTime=document.querySelector("#form-gra-time input:checked").value;c.firstChild;)c.removeChild(c.firstChild);o(a())}}document.querySelectorAll("input").forEach((e=>e.addEventListener("change",(function(){this.checked=!0,d()})))),document.querySelector("select").oninput=d,o(a());
