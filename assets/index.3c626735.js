var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,s=Object.prototype.propertyIsEnumerable,i=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,r=(e,r)=>{for(var l in r||(r={}))t.call(r,l)&&i(e,l,r[l]);if(a)for(var l of a(r))s.call(r,l)&&i(e,l,r[l]);return e},l=(e,i)=>{var r={};for(var l in e)t.call(e,l)&&i.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&a)for(var l of a(e))i.indexOf(l)<0&&s.call(e,l)&&(r[l]=e[l]);return r};import"./dynamic-import-polyfill.301f8c0f.js";import{D as n,a as o}from"./vendor.de0aed71.js";/* empty css                  */class d extends n.Component{constructor(){super(...arguments),this.state={hintType:"initial",hintText:this.props.initialHintText},this.fieldRef=n.createRef(),this.onInputChange=e=>{let t=e.target.value;const a=this.props.allowCharsPattern;void 0!==a&&(t=(t.match(new RegExp(a,"g"))||[]).join(""));const s=this.props.maxLength;void 0!==s&&(t=t.substring(0,Math.min(t.length,s)));const i=this.props.validationSteps;let r=!1;if(i)for(const l of i)if(!l.validation(t)){this.setState({hintType:"error",hintText:l.errorInfo}),r=!0;break}r||this.setState({hintType:"pass",hintText:this.props.passHintText}),e.target.value=t,this.props.handleChange(e),this.props.setPass(!r),this.props.required||0!==e.target.value.length||this.setState({hintType:"initial",hintText:this.props.initialHintText})},this.onInputFocus=()=>{this.fieldRef.current.classList.add("input-field-focused")}}render(){const{inputType:e="text"}=this.props;return n.createElement("div",{className:`${this.props.className} input-field`,ref:this.fieldRef},n.createElement("label",{htmlFor:this.props.fieldId},this.props.labelName),n.createElement("div",{className:`input-with-hint ${this.state.hintType}`},n.createElement("input",{type:e,name:this.props.filedName,id:this.props.fieldId,onChange:this.onInputChange,onFocus:this.onInputFocus}),n.createElement("div",{className:"hint"},this.state.hintText)))}}class p extends n.Component{constructor(){super(...arguments),this.validationSteps=(()=>{const e=e=>e.length+(e.match(/\p{Unified_Ideograph}/gu)||[]).length;return[{validation:e=>e.length>0,errorInfo:"姓名不能为空"},{validation:t=>e(t)>=4,errorInfo:"长度至少为4个字符"},{validation:t=>e(t)<=16,errorInfo:"长度不能超过16个字符"},{validation:e=>/^[\w\d\s!@#$%^&*)([\]+=.?/\\}{|<>:;"'_\p{Unified_Ideograph}]+$/u.test(e),errorInfo:"包含非法字符，只能包含数字、英文字符、英文符号、汉字"}]})()}render(){const e=this.props,{className:t="name-field",fieldId:a="name",filedName:s="name",labelName:i="名称",required:o=!0}=e,p=l(e,["className","fieldId","filedName","labelName","required"]);return n.createElement(d,r({className:t,fieldId:a,filedName:s,labelName:i,required:o,validationSteps:this.validationSteps,maxLength:16,initialHintText:"必填，长度为4~16个字符",passHintText:"名称格式正确"},p))}}class m extends n.Component{constructor(){super(...arguments),this.includedPattern=[/[a-zA-Z0-9]/,/[~`!@#$%^&*)(_+\-=\][}{|\\:;"'><?,./]/],this.validationSteps=[{validation:e=>e.length>0,errorInfo:"密码不能为空"},{validation:e=>e.length>=8,errorInfo:"密码长度至少为8"},{validation:e=>{for(const t of this.includedPattern)if(!t.test(e))return!1;return!0},errorInfo:"密码必须包含英文字符或数字，与英文特殊符号"}]}render(){const e=this.props,{className:t="password-field",fieldId:a="password",filedName:s="password",labelName:i="密码",required:o=!0}=e,p=l(e,["className","fieldId","filedName","labelName","required"]);return n.createElement(d,r({className:t,inputType:"password",fieldId:a,filedName:s,labelName:i,required:o,validationSteps:this.validationSteps,maxLength:16,allowCharsPattern:/[a-zA-Z0-9~`!@#$%^&*)(_+\\\-=\][}{|:;"'><?,./]+/,initialHintText:"必填，长度为8~16个字符，包含字母、数字、英文符号",passHintText:"密码可用"},p))}}function h(e){const{className:t="double-password-field",fieldId:a="doublePassword",filedName:s="doublePassword",labelName:i="密码确认",required:o=!0}=e,p=l(e,["className","fieldId","filedName","labelName","required"]);return n.createElement(d,r({className:t,inputType:"password",fieldId:a,filedName:s,labelName:i,required:o,validationSteps:e.validationSteps,maxLength:16,allowCharsPattern:/[a-zA-Z0-9~`!@#$%^&*)(_+\\\-=\][}{|:;"'><?,./]+/,initialHintText:"再次输入相同密码",passHintText:"密码输入一致"},p))}class f extends n.Component{constructor(){super(...arguments),this.validationSteps=[{validation:e=>e.length>0&&/^[\w\d_-]+@[\w\d_-]+(\.[\w\d_-]+)*\.[\w\d_-]+$/.test(e),errorInfo:"邮箱格式错误"}]}render(){const e=this.props,{className:t="mail-field",fieldId:a="mail",filedName:s="mail",labelName:i="邮箱",required:o=!1}=e,p=l(e,["className","fieldId","filedName","labelName","required"]);return n.createElement(d,r({className:t,fieldId:a,filedName:s,labelName:i,required:o,validationSteps:this.validationSteps,maxLength:50,allowCharsPattern:/[\w\d_\-@.]+/,initialHintText:"选填邮箱地址",passHintText:"邮箱格式正确"},p))}}class c extends n.Component{constructor(){super(...arguments),this.validationSteps=[{validation:e=>e.length>0&&/^1[3-9]\d{9}$/.test(e),errorInfo:"手机格式错误"}]}render(){const e=this.props,{className:t="phone-field",fieldId:a="phone",filedName:s="phone",labelName:i="手机",required:o=!1}=e,p=l(e,["className","fieldId","filedName","labelName","required"]);return n.createElement(d,r({className:t,fieldId:a,filedName:s,labelName:i,required:o,validationSteps:this.validationSteps,maxLength:11,allowCharsPattern:/[\d]+/,initialHintText:"选填手机号",passHintText:"手机格式正确"},p))}}const u=Object.freeze({name:"name",password:"password",doublePassword:"doublePassword",mail:"mail",phone:"phone"}),N={name:!0,password:!0,doublePassword:!0,mail:!1,phone:!1},b=(()=>{const e={};for(const t of Object.keys(u))e[t]={value:"",pass:!N[t]};return e})();class v extends n.Component{constructor(){super(...arguments),this.state=b,this.fieldCallBacks=(()=>{const e={};for(const t of Object.keys(u)){const a=t;e[a]={handleChange:e=>{this.setState((t=>{const s=r({},t);return s[a]={value:e.target.value,pass:t[a].pass},s}))},setPass:e=>{this.setState((t=>{const s=r({},t);return s[a]={value:t[a].value,pass:e},s}))}}}return e})(),this.handleSubmit=e=>{const t=this.state;for(const a of Object.keys(u))if(!t[a].pass)return e.preventDefault(),void alert("请重新是否完整、正确")}}render(){return n.createElement("form",{className:"demo-form",onSubmit:this.handleSubmit,method:""},n.createElement(p,r(r(r({},this.state.name),this.fieldCallBacks.name),{required:N.name,fieldId:u.name,filedName:u.name})),n.createElement(m,r(r(r({},this.state.password),this.fieldCallBacks.password),{required:N.password,fieldId:u.password,filedName:u.password})),n.createElement(h,r(r(r({},this.state.doublePassword),this.fieldCallBacks.doublePassword),{required:N.doublePassword,fieldId:u.doublePassword,filedName:u.doublePassword,validationSteps:[{validation:e=>this.state.password.value===e,errorInfo:"两次密码输入不一致"}]})),n.createElement(f,r(r(r({},this.state.mail),this.fieldCallBacks.mail),{required:N.mail,fieldId:u.mail,filedName:u.mail})),n.createElement(c,r(r(r({},this.state.phone),this.fieldCallBacks.phone),{required:N.phone,fieldId:u.phone,filedName:u.phone})),n.createElement("button",{type:"submit",className:"submit-button"},"提交"))}}o.render(n.createElement(v,null),document.getElementById("root"));
